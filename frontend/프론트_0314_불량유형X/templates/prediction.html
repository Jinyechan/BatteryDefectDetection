<!-- templates/prediction.html -->
{% extends "base.html" %}

{% block title %}ë¶ˆëŸ‰ ì˜ˆì¸¡{% endblock %}

{% block content %}
<style>

    /* ì˜ˆì¸¡ ì„¹ì…˜ */
    .prediction-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 25px;
        margin-bottom: 30px;
    }
    .chart-container {
        background: white;
        padding: 25px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        overflow: hidden;
    }
    .chart-header {
        margin-bottom: 20px;
    }
    .chart-title { font-size: 18px; color: #343a40; }

    /* ì˜ˆì¸¡ ë°ì´í„° í…Œì´ë¸” */
    .data-table {
        width: 100%;
        border-collapse: collapse;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin-top: 25px;
        table-layout: fixed;
    }
    .data-table th,
    .data-table td {
        padding: 12px 15px;
        text-align: left;
        border-bottom: 1px solid #eee;
        word-break: break-word;
    }
    .data-table th {
        background: #f8f9fa;
        color: #666;
        font-weight: normal;
    }
    .prediction-value { color: #e74c3c; }
</style>

<h1 style="margin-bottom: 30px;">ë¶ˆëŸ‰ ì˜ˆì¸¡</h1>

<!-- ì°¨íŠ¸ ì˜ì—­ -->
<div class="prediction-grid">
    <div class="chart-container">
        <div class="chart-header">
            <div class="chart-title">ì˜ˆì¸¡ ë¶ˆëŸ‰ë¥  ì¶”ì´</div>
        </div>
        <canvas id="trendChart"></canvas>
    </div>
    
    <div class="chart-container">
        <div class="chart-header">
            <div class="chart-title">ë¶ˆëŸ‰ ìœ í˜•ë³„ ì˜ˆì¸¡</div>
        </div>
        <canvas id="typeChart"></canvas>
    </div>
</div>

<!-- ìƒì„¸ ì˜ˆì¸¡ ë°ì´í„° -->
<div class="chart-container">
    <div class="chart-header">
        <div class="chart-title">ìƒì„¸ ì˜ˆì¸¡ ë°ì´í„°</div>
    </div>
    <table class="data-table">
        <thead>
            <tr>
                <th>ë¼ì¸ ì •ë³´</th>
                <th>ë‚ ì§œ</th>
                <th>ì˜ˆì¸¡ ë¶ˆëŸ‰ë¥ </th>
                <th>ì£¼ìš” ë¶ˆëŸ‰ ìœ í˜•</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>ë¼ì¸ 1</td>
                <td>2024-02-15</td>
                <td class="prediction-value">2.8%</td>
                <td>ì˜¤ì—¼</td>
            </tr>
            <tr>
                <td>ë¼ì¸ 2</td>
                <td>2024-02-15</td>
                <td class="prediction-value">1.5%</td>
                <td>ì˜¤ì—¼+ì†ìƒ</td>
            </tr>
            <tr>
                <td>ë¼ì¸ 3</td>
                <td>2024-02-15</td>
                <td class="prediction-value">1.2%</td>
                <td>ì˜¤ì—¼</td>
            </tr>
        </tbody>
    </table>
</div>

<!-- ì•Œë¦¼ UI -->
<div class="notification-container">
    <div class="notification-icon" onclick="toggleNotificationModal()">ğŸ””</div>
</div>

<!-- ëª¨ë‹¬ ì•Œë¦¼ ë¦¬ìŠ¤íŠ¸ -->
<div class="modal-overlay" id="modalOverlay" onclick="toggleNotificationModal()"></div>
<div class="notification-modal" id="notificationModal">
    <div class="notification-header">
        <span>ì•Œë¦¼</span>
        <span style="cursor: pointer;" onclick="toggleNotificationModal()">âœ–</span>
    </div>
    <div class="notification-item">ğŸ“© ì´ë©”ì¼ ì•Œë¦¼: ì‹œìŠ¤í…œ ì ê²€ ì˜ˆì •</div>
    <div class="notification-item">âš ï¸ ê²½ê³ : ì˜¨ë„ ì„¼ì„œ ì´ìƒ ê°ì§€</div>
    <div class="notification-item">âœ… ë³´ê³ ì„œ ì „ì†¡ ì™„ë£Œ</div>
    
    <!-- ì•Œë¦¼ ì„¤ì • UI -->
    <div class="notification-settings">
        <label for="notifTime">ì•Œë¦¼ ì‹œê°„ ì„¤ì •</label>
        <select id="notifTime">
            <option value="ì¦‰ì‹œ">ì¦‰ì‹œ</option>
            <option value="1ì‹œê°„ë§ˆë‹¤">1ì‹œê°„ë§ˆë‹¤</option>
            <option value="í•˜ë£¨ í•œ ë²ˆ">í•˜ë£¨ í•œ ë²ˆ</option>
        </select>
        
        <label for="notifType">ì•Œë¦¼ ìœ í˜• ì„ íƒ</label>
        <select id="notifType">
            <option value="all">ëª¨ë“  ì•Œë¦¼</option>
            <option value="warnings">ê²½ê³  ì•Œë¦¼ë§Œ</option>
            <option value="emails">ì´ë©”ì¼ ì•Œë¦¼ë§Œ</option>
        </select>
        
        <label>
            <input type="checkbox" id="pushNotif"> í‘¸ì‹œ ì•Œë¦¼ í™œì„±í™”
        </label>
    </div>
</div>

<script>
    // ì˜ˆì¸¡ ë¶ˆëŸ‰ë¥  ì¶”ì´ ì°¨íŠ¸
    const trendCtx = document.getElementById('trendChart').getContext('2d');
    new Chart(trendCtx, {
        type: 'line',
        data: {
            labels: ['09:00', '10:00', '11:00', '12:00', '13:00', '14:00'],
            datasets: [{
                label: 'ì˜ˆì¸¡ ë¶ˆëŸ‰ë¥ ',
                data: [1.1, 1.5, 1.8, 2.0, 1.6, 2.5],
                borderColor: '#4dabf7',
                backgroundColor: 'rgba(77, 171, 247, 0.1)',
                tension: 0.4,
                fill: true
            }, {
                label: 'ì‹¤ì œ ë¶ˆëŸ‰ë¥ ',
                data: [1.0, 1.4, 1.9, 1.8, 1.7, 2.3],
                borderColor: '#82c91e',
                backgroundColor: 'transparent',
                tension: 0.4,
                borderDash: [5, 5]
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: true,
            scales: {
                y: {
                    beginAtZero: true,
                    max: 3,
                    ticks: {
                        callback: function(value) {
                            return value + '%';
                        }
                    }
                }
            }
        }
    });

    // ë¶ˆëŸ‰ ìœ í˜•ë³„ ì˜ˆì¸¡ ì°¨íŠ¸
    const typeCtx = document.getElementById('typeChart').getContext('2d');
    new Chart(typeCtx, {
        type: 'doughnut',
        data: {
            labels: ['ì˜¤ì—¼', 'ì˜¤ì—¼+ì†ìƒ'],
            datasets: [{
                data: [60, 40],
                backgroundColor: ['#5c7cfa', '#82c91e'],
                borderWidth: 0
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: true,
            cutout: '70%',
            plugins: {
                legend: {
                    position: 'right'
                }
            }
        }
    });
</script>
{% endblock %}