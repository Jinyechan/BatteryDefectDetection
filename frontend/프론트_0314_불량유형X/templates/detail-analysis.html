{% extends "base.html" %}

{% block title %}ë¶ˆëŸ‰ ìƒì„¸ë¶„ì„{% endblock %}

{% block content %}
<head>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet"/>
    <link href="https://ai-public.creatie.ai/gen_page/tailwind-custom.css" rel="stylesheet"/>
    <style>
        .range-with-value::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: currentColor;
            cursor: pointer;
            position: relative;
        }
        .range-with-value::-webkit-slider-thumb::after {
            content: attr(title);
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            background: #666;
            color: white;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 12px;
        }
        .range-with-value::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: currentColor;
            cursor: pointer;
            position: relative;
        }
        .range-with-value::-moz-range-thumb::after {
            content: attr(title);
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            background: #666;
            color: white;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 12px;
        }
        /* ì°¨íŠ¸ í—¤ë” ìŠ¤íƒ€ì¼ */
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .chart-header h3 {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
        }
        .chart-header select {
            padding: 6px 12px;
            font-size: 14px;
            border-radius: 6px;
            border: 1px solid #ddd;
            background-color: #f8f9fa;
            color: #333;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        .chart-header select:hover {
            border-color: #3498db;
            box-shadow: 0 0 5px rgba(52, 152, 219, 0.3);
        }
        .chart-header select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 5px rgba(52, 152, 219, 0.5);
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.5.0/echarts.min.js"></script>
    <script src="https://cdn.tailwindcss.com/3.4.5?plugins=forms@0.5.7,typography@0.5.13,aspect-ratio@0.4.2,container-queries@0.1.1"></script>
    <script src="https://ai-public.creatie.ai/gen_page/tailwind-config.min.js" data-color="#000000" data-border-radius="small"></script>
</head>

<main class="main-content">
    <div class="bg-white shadow-sm rounded-lg p-6 w-full max-w-6xl">
        <div class="flex justify-between items-center mb-6">
            <div class="flex items-center space-x-4">
                <button class="text-gray-600 hover:text-custom" onclick="location.href='/analysis'">
                    <i class="fas fa-arrow-left mr-2"></i>ëŒì•„ê°€ê¸°
                </button>
            </div>
            <div class="flex space-x-4">
                <button class="text-custom hover:text-custom/80">
                    <i class="fas fa-download mr-2"></i>ë³´ê³ ì„œ ë‹¤ìš´ë¡œë“œ
                </button>
            </div>
        </div>
        <h1 class="text-2xl font-semibold mb-6">ë¶ˆëŸ‰ ë¶„ì„ ê²°ê³¼</h1>
        <div class="text-gray-600 mb-6">AI ë¶„ì„ì„ í†µí•´ ê²€ì¶œëœ ì œí’ˆì˜ ë¶ˆëŸ‰ ìƒì„¸ ì •ë³´ì…ë‹ˆë‹¤.</div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <div class="bg-gray-100 p-4 rounded-lg shadow-sm relative">
                <img src="https://picsum.photos/400/300" alt="ë¶ˆëŸ‰ ì´ë¯¸ì§€" class="w-full h-auto rounded"/>
            </div>
            <div class="bg-white p-6 rounded-lg border shadow-sm">
                <h2 class="text-lg font-medium mb-4">ë¶ˆëŸ‰ ìƒì„¸ ì •ë³´</h2>
                <div class="space-y-4">
                    <div class="flex justify-between">
                        <span class="text-gray-600">ë‚ ì§œ:</span>
                        <span>2024-02-15 14:30:00</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">ìƒì‚° ë¼ì¸:</span>
                        <span>ë¼ì¸ A</span> <!-- ì¶”ê°€ëœ ìƒì‚° ë¼ì¸ ì •ë³´ -->
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">ë¶ˆëŸ‰ ì ìˆ˜:</span>
                        <span>85/100</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">ë¶ˆëŸ‰ ì •ë„:</span>
                        <span class="text-red-500">ì‹¬ê°</span>
                    </div>
                    <div class="mt-4">
                        <h3 class="text-lg font-medium mb-3">ì¡°ì¹˜ ì‚¬í•­</h3>
                        <p class="text-gray-600">
                            1. ì´ì†¡ ì¥ë¹„ ì ê²€ í•„ìš”<br/>
                            2. ì‘ì—…ì êµìœ¡ ì‹¤ì‹œ<br/>
                            3. í’ˆì§ˆ ê´€ë¦¬ ê¸°ì¤€ ì¬ê²€í† 
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="mt-8 border-t pt-6">
            <h2 class="text-xl font-semibold mb-4">ë¶ˆëŸ‰ ë¡œê·¸ ë° ì¡°ì¹˜ ì…ë ¥</h2>
            <div class="space-y-6">
                <div class="bg-white rounded-lg border shadow-sm p-4">
                    <h3 class="text-lg font-medium mb-3">ê¸ˆì¼ ë¶ˆëŸ‰ ë¡œê·¸</h3>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì‹œê°„</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ìƒì‚° ë¼ì¸</th> <!-- ì¶”ê°€ëœ ì—´ -->
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ë¡œê·¸ ë‚´ìš©</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì‹¬ê°ë„</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">14:30:00</td>
                                    <td class="px-6 py-4 text-sm text-gray-900">ë¼ì¸1</td>
                                    <td class="px-6 py-4 text-sm text-gray-900">ë¶ˆëŸ‰ ì œí’ˆ ê²€ì¶œ</td>
                                    <td class="px-6 py-4">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">ì‹¬ê°</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">14:29:55</td>
                                    <td class="px-6 py-4 text-sm text-gray-900">ë¼ì¸2</td>
                                    <td class="px-6 py-4 text-sm text-gray-900">ìƒì‚°ë¼ì¸ ì´ìƒ ê°ì§€</td>
                                    <td class="px-6 py-4">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">ì£¼ì˜</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="bg-white rounded-lg border shadow-sm p-4">
                    <h3 class="text-lg font-medium mb-3">CAPA ê´€ë¦¬</h3>
                    <form class="space-y-4">
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <select class="rounded-md border-gray-300">
                                <option>ì‹œì •</option>
                                <option>ì˜ˆë°©</option>
                            </select>
                            <input type="date" class="rounded-md border-gray-300"/>
                        </div>
                        <div>
                            <textarea class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" rows="4" placeholder="ì¡°ì¹˜ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                        </div>
                        <div class="mt-3">
                            <input type="text" class="block w-full rounded-md border-gray-300 bg-gray-100" placeholder="ë‹´ë‹¹ìëª…" disabled="true" value="ê¹€ê´€ë¦¬ì"/>
                        </div>
                        <div class="mt-3">
                            <button type="submit" class="w-full bg-custom text-white rounded-md hover:bg-custom/90 py-2 mt-4">ì œì¶œ</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="mt-6 bg-gray-50 p-4 rounded-lg">
                <h3 class="text-lg font-medium mb-3">ë²•ì  ì°¸ê³ ì‚¬í•­</h3>
                <ul class="space-y-2 text-gray-600">
                    <li>â€¢ ê²°í•¨ ë³´ê³ : 24ì‹œê°„ ì´ë‚´ í’ˆì§ˆê´€ë¦¬ì ë³´ê³  ì˜ë¬´</li>
                    <li>â€¢ ë¬¸ì„œ ë³´ê´€: 5ë…„ê°„ ê¸°ë¡ ë³´ê´€ (ISO 9001)</li>
                    <li>â€¢ ë¦¬ì½œ ê¸°ì¤€: ì‹¬ê°ë„ 'ìƒ' ì‹œ ì¦‰ì‹œ ê²€í†  (KC ì¸ì¦)</li>
                </ul>
            </div>
        </div>
    </div>
</main>

<!-- ì•Œë¦¼ UI -->
<div class="notification-container">
    <div class="notification-icon" onclick="toggleNotificationModal()">ğŸ””</div>
</div>

<!-- ëª¨ë‹¬ ì•Œë¦¼ ë¦¬ìŠ¤íŠ¸ -->
<div class="modal-overlay" id="modalOverlay" onclick="toggleNotificationModal()"></div>
<div class="notification-modal" id="notificationModal">
    <div class="notification-header">
        <span>ì•Œë¦¼</span>
        <span style="cursor: pointer;" onclick="toggleNotificationModal()">âœ–</span>
    </div>
    <div class="notification-item">ğŸ“© ì´ë©”ì¼ ì•Œë¦¼: ì‹œìŠ¤í…œ ì ê²€ ì˜ˆì •</div>
    <div class="notification-item">âš ï¸ ê²½ê³ : ì˜¨ë„ ì„¼ì„œ ì´ìƒ ê°ì§€</div>
    <div class="notification-item">âœ… ë³´ê³ ì„œ ì „ì†¡ ì™„ë£Œ</div>
    
    <!-- ì•Œë¦¼ ì„¤ì • UI -->
    <div class="notification-settings">
        <label for="notifTime">ì•Œë¦¼ ì‹œê°„ ì„¤ì •</label>
        <select id="notifTime">
            <option value="ì¦‰ì‹œ">ì¦‰ì‹œ</option>
            <option value="1ì‹œê°„ë§ˆë‹¤">1ì‹œê°„ë§ˆë‹¤</option>
            <option value="í•˜ë£¨ í•œ ë²ˆ">í•˜ë£¨ í•œ ë²ˆ</option>
        </select>
        
        <label for="notifType">ì•Œë¦¼ ìœ í˜• ì„ íƒ</label>
        <select id="notifType">
            <option value="all">ëª¨ë“  ì•Œë¦¼</option>
            <option value="warnings">ê²½ê³  ì•Œë¦¼ë§Œ</option>
            <option value="emails">ì´ë©”ì¼ ì•Œë¦¼ë§Œ</option>
        </select>
        
        <label>
            <input type="checkbox" id="pushNotif"> í‘¸ì‹œ ì•Œë¦¼ í™œì„±í™”
        </label>
    </div>
</div>

<script>
    function syncRangeWithNumber(rangeId, numberId) {
        const range = document.querySelector(rangeId);
        const number = document.querySelector(numberId);
        range.addEventListener('input', function(e) {
            number.value = e.target.value;
        });
        number.addEventListener('input', function(e) {
            range.value = e.target.value;
        });
    }
    syncRangeWithNumber('#id-108', '#sensitivity-number');
    syncRangeWithNumber('#id-113', '#false-detection-number');

    const lineChart = echarts.init(document.getElementById('lineChart'));
    lineChart.setOption({
        tooltip: { trigger: 'axis' },
        legend: { data: ['ë¶ˆëŸ‰ë¥ '] },
        xAxis: { type: 'category', data: ['ë¼ì¸ A', 'ë¼ì¸ B', 'ë¼ì¸ C'] },
        yAxis: { type: 'value', axisLabel: { formatter: '{value}%' } },
        series: [{
            name: 'ë¶ˆëŸ‰ë¥ ',
            type: 'bar',
            data: [2.5, 1.9, 2.2],
            itemStyle: { color: '#e74c3c', borderRadius: [10, 10, 0, 0] }
        }]
    });

    window.addEventListener('resize', function() {
        lineChart.resize();
    });

    function openNotificationModal() {
        document.getElementById('notificationModal').classList.remove('hidden');
    }

    function closeNotificationModal() {
        document.getElementById('notificationModal').classList.add('hidden');
    }
</script>
{% endblock %}